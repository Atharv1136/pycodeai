[
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "f3056cff-16f1-4e6b-a3aa-fad456b76fb6",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC001-user authentication signup login logout",
    "description": "Test the user authentication API endpoints for signup, login, and logout to ensure users can create accounts, authenticate with valid credentials, receive JWT tokens, and properly terminate sessions.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_user_authentication_signup_login_logout():\n    signup_url = f\"{BASE_URL}/api/auth/signup\"\n    login_url = f\"{BASE_URL}/api/auth/login\"\n    logout_url = f\"{BASE_URL}/api/auth/logout\"\n\n    # Use test user credentials\n    test_user = {\n        \"username\": \"testuser_tc001\",\n        \"email\": \"testuser_tc001@example.com\",\n        \"password\": \"TestPassword123!\"\n    }\n\n    headers = {\"Content-Type\": \"application/json\"}\n\n    # Signup\n    resp_signup = None\n    try:\n        resp_signup = requests.post(signup_url, json=test_user, headers=headers, timeout=TIMEOUT)\n        assert resp_signup.status_code == 201 or resp_signup.status_code == 200, f\"Signup failed with status code {resp_signup.status_code}\"\n        signup_data = resp_signup.json()\n        # Assuming signup response returns user info without password\n        assert \"username\" in signup_data and signup_data[\"username\"] == test_user[\"username\"]\n        assert \"email\" in signup_data and signup_data[\"email\"] == test_user[\"email\"]\n\n        # Login\n        login_payload = {\n            \"username\": test_user[\"username\"],\n            \"password\": test_user[\"password\"]\n        }\n        resp_login = requests.post(login_url, json=login_payload, headers=headers, timeout=TIMEOUT)\n        assert resp_login.status_code == 200, f\"Login failed with status code {resp_login.status_code}\"\n        login_data = resp_login.json()\n        assert \"token\" in login_data and isinstance(login_data[\"token\"], str) and len(login_data[\"token\"]) > 0\n        token = login_data[\"token\"]\n\n        # Logout\n        auth_headers = {\"Authorization\": f\"Bearer {token}\"}\n        resp_logout = requests.post(logout_url, headers=auth_headers, timeout=TIMEOUT)\n        assert resp_logout.status_code == 200 or resp_logout.status_code == 204, f\"Logout failed with status code {resp_logout.status_code}\"\n\n        # Verify logout by trying to access logout endpoint again or protected endpoint if available\n        # Trying logout again with same token should fail or not authorized\n        resp_logout_again = requests.post(logout_url, headers=auth_headers, timeout=TIMEOUT)\n        assert resp_logout_again.status_code in (401, 403), \"Token should be invalid after logout\"\n\n    finally:\n        # Cleanup: There is no explicit delete user endpoint in PRD.\n        # If the API supports user deletion, it would be performed here.\n        # Otherwise, this test user may remain unless DB reset.\n        pass\n\ntest_user_authentication_signup_login_logout()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 57, in <module>\n  File \"<string>\", line 24, in test_user_authentication_signup_login_logout\nAssertionError: Signup failed with status code 400\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.592Z",
    "modified": "2025-11-01T09:23:36.149Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "98cdb2e2-3c41-4e1d-9944-1c8ec79c1d60",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC002-project management create open rename delete",
    "description": "Verify the project management API endpoints to create new projects, open existing projects, rename projects, and delete projects with persistence in the MySQL database.",
    "code": "import requests\nimport uuid\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_project_management_create_open_rename_delete():\n    # Step 1: Signup and login to get JWT token\n    signup_url = f\"{BASE_URL}/api/auth/signup\"\n    login_url = f\"{BASE_URL}/api/auth/login\"\n    projects_url = f\"{BASE_URL}/api/projects\"\n\n    test_email = f\"testuser_{uuid.uuid4().hex[:8]}@example.com\"\n    test_password = \"StrongP@ssw0rd!\"\n    test_name = \"Test User\"\n\n    signup_payload = {\n        \"email\": test_email,\n        \"name\": test_name,\n        \"password\": test_password\n    }\n\n    # Signup new user\n    signup_resp = requests.post(signup_url, json=signup_payload, timeout=TIMEOUT)\n    assert signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n\n    # Login user to get JWT token\n    login_payload = {\n        \"email\": test_email,\n        \"password\": test_password\n    }\n    login_resp = requests.post(login_url, json=login_payload, timeout=TIMEOUT)\n    assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n    token = login_resp.json().get(\"access_token\") or login_resp.json().get(\"token\") or login_resp.json().get(\"jwt\")\n    assert token, \"JWT token not found in login response\"\n\n    headers = {\n        \"Authorization\": f\"Bearer {token}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    project_id = None\n    try:\n        # Step 2: Create new project\n        project_name = f\"TestProject_{uuid.uuid4().hex[:8]}\"\n        create_payload = {\n            \"name\": project_name\n        }\n        create_resp = requests.post(projects_url, json=create_payload, headers=headers, timeout=TIMEOUT)\n        assert create_resp.status_code == 201, f\"Project creation failed: {create_resp.text}\"\n        created_project = create_resp.json()\n        assert \"id\" in created_project, \"Created project ID missing\"\n        assert created_project.get(\"name\") == project_name, \"Created project name mismatch\"\n        project_id = created_project[\"id\"]\n\n        # Step 3: Open existing project (GET)\n        get_project_url = f\"{projects_url}/{project_id}\"\n        open_resp = requests.get(get_project_url, headers=headers, timeout=TIMEOUT)\n        assert open_resp.status_code == 200, f\"Open project failed: {open_resp.text}\"\n        opened_project = open_resp.json()\n        assert opened_project.get(\"id\") == project_id, \"Opened project ID mismatch\"\n        assert opened_project.get(\"name\") == project_name, \"Opened project name mismatch\"\n\n        # Step 4: Rename project (PUT or PATCH)\n        new_project_name = project_name + \"_Renamed\"\n        rename_payload = {\n            \"name\": new_project_name\n        }\n        rename_resp = requests.put(get_project_url, json=rename_payload, headers=headers, timeout=TIMEOUT)\n        assert rename_resp.status_code == 200, f\"Rename project failed: {rename_resp.text}\"\n        renamed_project = rename_resp.json()\n        assert renamed_project.get(\"id\") == project_id, \"Renamed project ID mismatch\"\n        assert renamed_project.get(\"name\") == new_project_name, \"Renamed project name mismatch\"\n\n        # Step 5: Confirm rename by reopening\n        confirm_resp = requests.get(get_project_url, headers=headers, timeout=TIMEOUT)\n        assert confirm_resp.status_code == 200, f\"Confirm rename open project failed: {confirm_resp.text}\"\n        confirm_project = confirm_resp.json()\n        assert confirm_project.get(\"name\") == new_project_name, \"Project rename not persisted\"\n\n    finally:\n        # Step 6: Delete project to cleanup\n        if project_id:\n            delete_resp = requests.delete(f\"{projects_url}/{project_id}\", headers=headers, timeout=TIMEOUT)\n            # Delete project might return 204 No Content or 200 OK\n            assert delete_resp.status_code in (200, 204), f\"Delete project failed: {delete_resp.text}\"\n\ntest_project_management_create_open_rename_delete()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 88, in <module>\n  File \"<string>\", line 50, in test_project_management_create_open_rename_delete\nAssertionError: Project creation failed: {\"error\":\"User ID and project name are required\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.599Z",
    "modified": "2025-11-01T09:24:19.772Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "8266d07e-7e9a-45b9-8637-ee29f4b6e5ef",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC003-python code execution sandbox",
    "description": "Test the code execution API to run Python code in a secure sandbox environment, ensuring correct execution, capturing stdout, stderr, execution time, and handling timeouts.",
    "code": "import requests\nimport time\n\nBASE_URL = \"http://localhost:9002\"\nEXECUTE_ENDPOINT = f\"{BASE_URL}/api/code/execute\"\nTIMEOUT_SECONDS = 30\n\ndef test_python_code_execution_sandbox():\n    # A simple Python code snippet that prints to stdout and stderr and sleeps for 1 second\n    # to test execution time and output capturing.\n    python_code = \"\"\"\nimport sys\nimport time\nprint(\"Hello stdout\")\nprint(\"Hello stderr\", file=sys.stderr)\ntime.sleep(1)\n\"\"\"\n    payload = {\n        \"language\": \"python\",\n        \"code\": python_code,\n        \"timeout\": 5  # Setting a timeout less than TIMEOUT_SECONDS to trigger timeout behavior if needed\n    }\n    headers = {\n        \"Content-Type\": \"application/json\",\n    }\n\n    try:\n        start_time = time.time()\n        response = requests.post(EXECUTE_ENDPOINT, json=payload, headers=headers, timeout=TIMEOUT_SECONDS)\n        elapsed_time = time.time() - start_time\n    except requests.exceptions.Timeout:\n        # If the request itself times out at the HTTP client level (timeout param)\n        assert False, \"Request timed out unexpectedly\"\n    except requests.exceptions.RequestException as e:\n        assert False, f\"Request failed: {e}\"\n    \n    assert response.status_code == 200, f\"Expected 200 OK, got {response.status_code}, response: {response.text}\"\n\n    try:\n        result = response.json()\n    except ValueError:\n        assert False, \"Response is not valid JSON\"\n\n    # Validate presence and types of expected fields in the response JSON\n    assert isinstance(result, dict), \"Result should be a JSON object\"\n    assert \"stdout\" in result, \"Response missing 'stdout'\"\n    assert \"stderr\" in result, \"Response missing 'stderr'\"\n    assert \"execution_time\" in result, \"Response missing 'execution_time'\"\n    assert \"timeout\" in result, \"Response missing 'timeout' flag\"\n\n    # Validate stdout content\n    stdout = result[\"stdout\"]\n    stderr = result[\"stderr\"]\n    exec_time = result[\"execution_time\"]\n    timed_out = result[\"timeout\"]\n\n    assert isinstance(stdout, str), \"'stdout' should be a string\"\n    assert isinstance(stderr, str), \"'stderr' should be a string\"\n    assert isinstance(exec_time, (int, float)), \"'execution_time' should be numeric\"\n    assert isinstance(timed_out, bool), \"'timeout' should be boolean\"\n\n    # Check stdout and stderr expected content\n    assert \"Hello stdout\" in stdout, \"'stdout' does not contain expected output\"\n    assert \"Hello stderr\" in stderr, \"'stderr' does not contain expected output\"\n\n    # Execution time sanity checks\n    # The execution_time reported by the API should be close to but not exceed the sleep time + overhead\n    assert 0 <= exec_time <= 10, \"'execution_time' is out of expected range (0-10 seconds)\"\n    # The elapsed HTTP request time should be close to the execution_time, allowing some network overhead\n    assert exec_time <= elapsed_time <= exec_time + 5, \"Elapsed time inconsistent with execution_time\"\n\n    # This test code snippet should not trigger timeout\n    assert timed_out is False, \"Code execution incorrectly marked as timeout\"\n\n    # Test handling of actual timeout: send code that sleeps longer than timeout and confirm timeout flag\n    timeout_payload = {\n        \"language\": \"python\",\n        \"code\": \"import time\\ntime.sleep(10)\",\n        \"timeout\": 3\n    }\n    try:\n        timeout_response = requests.post(EXECUTE_ENDPOINT, json=timeout_payload, headers=headers, timeout=TIMEOUT_SECONDS)\n    except requests.exceptions.RequestException as e:\n        assert False, f\"Timeout test request failed: {e}\"\n\n    assert timeout_response.status_code == 200, f\"Expected 200 OK for timeout test, got {timeout_response.status_code}\"\n    try:\n        timeout_result = timeout_response.json()\n    except ValueError:\n        assert False, \"Timeout test response is not valid JSON\"\n\n    assert \"timeout\" in timeout_result, \"Timeout test response missing 'timeout' field\"\n    assert timeout_result[\"timeout\"] is True, \"Timeout test did not trigger timeout flag as expected\"\n\n    # stdout and stderr may be empty or partial in timeout case - ensure they exist and are strings\n    assert isinstance(timeout_result.get(\"stdout\", \"\"), str), \"'stdout' in timeout test should be string\"\n    assert isinstance(timeout_result.get(\"stderr\", \"\"), str), \"'stderr' in timeout test should be string\"\n    assert isinstance(timeout_result.get(\"execution_time\", 0), (int, float)), \"'execution_time' in timeout test should be numeric\"\n\ntest_python_code_execution_sandbox()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 100, in <module>\n  File \"<string>\", line 37, in test_python_code_execution_sandbox\nAssertionError: Expected 200 OK, got 401, response: {\"error\":\"Authentication required. Please provide a valid token.\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.605Z",
    "modified": "2025-11-01T09:23:34.857Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "0ec7754a-4623-44de-828c-adc764cc34e1",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC004-ai code assistant chat interface",
    "description": "Validate the AI chat assistant API for providing contextual code assistance including code explanation, error fixing, optimization, and code generation based on user prompts.",
    "code": "import requests\nimport uuid\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_ai_code_assistant_chat_interface():\n    # First, signup a new user to authenticate and get JWT token\n    signup_url = f\"{BASE_URL}/api/auth/signup\"\n    login_url = f\"{BASE_URL}/api/auth/login\"\n    assist_url = f\"{BASE_URL}/api/ai/assist\"\n    headers = {\"Content-Type\": \"application/json\"}\n\n    # Generate unique user info\n    unique_suffix = str(uuid.uuid4())[:8]\n    user_payload = {\n        \"name\": f\"Test User {unique_suffix}\",\n        \"username\": f\"testuser_{unique_suffix}\",\n        \"email\": f\"testuser_{unique_suffix}@example.com\",\n        \"password\": \"Password123!\"\n    }\n\n    # Sign up user\n    signup_resp = requests.post(signup_url, json=user_payload, headers=headers, timeout=TIMEOUT)\n    assert signup_resp.status_code == 201 or signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n\n    # Login user\n    login_payload = {\n        \"email\": user_payload[\"email\"],\n        \"password\": user_payload[\"password\"]\n    }\n    login_resp = requests.post(login_url, json=login_payload, headers=headers, timeout=TIMEOUT)\n    assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n\n    login_json = login_resp.json()\n    assert \"token\" in login_json, \"JWT token missing from login response\"\n    token = login_json[\"token\"]\n\n    auth_headers = {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": f\"Bearer {token}\"\n    }\n\n    # Define prompts for AI assistance scenarios\n    prompts = [\n        {\"action\": \"explain\", \"prompt\": \"Explain how the factorial function works in Python:\\n\\ndef factorial(n):\\n    return 1 if n==0 else n*factorial(n-1)\"},\n        {\"action\": \"fix\", \"prompt\": \"Fix the following Python code with syntax errors:\\n\\nfor i in range(5)\\n    print(i)\"},\n        {\"action\": \"optimize\", \"prompt\": \"Optimize this Python code for summing a list:\\n\\nresult = 0\\nfor num in nums:\\n    result += num\"},\n        {\"action\": \"generate\", \"prompt\": \"Generate a Python function to check if a string is a palindrome.\"}\n    ]\n\n    for req in prompts:\n        payload = {\n            \"action\": req[\"action\"],\n            \"prompt\": req[\"prompt\"]\n        }\n        resp = requests.post(assist_url, json=payload, headers=auth_headers, timeout=TIMEOUT)\n        assert resp.status_code == 200, f\"AI assist request failed for action {req['action']}: {resp.text}\"\n\n        response_json = resp.json()\n        # Validate expected keys in response\n        assert \"response\" in response_json, f\"Missing 'response' in AI assist response for action {req['action']}\"\n        response_text = response_json[\"response\"]\n        assert isinstance(response_text, str) and len(response_text.strip()) > 0, f\"Empty response text for action {req['action']}\"\n\n    # Logout user to end session\n    logout_url = f\"{BASE_URL}/api/auth/logout\"\n    logout_resp = requests.post(logout_url, headers=auth_headers, timeout=TIMEOUT)\n    assert logout_resp.status_code == 200 or logout_resp.status_code == 204, f\"Logout failed: {logout_resp.text}\"\n\ntest_ai_code_assistant_chat_interface()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 71, in <module>\n  File \"<string>\", line 58, in test_ai_code_assistant_chat_interface\nAssertionError: AI assist request failed for action explain: {\"error\":\"Instruction is required\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.611Z",
    "modified": "2025-11-01T09:24:19.769Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "93514ff1-da9f-4901-9b59-4192ab6519fb",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC005-csv excel file upload and ai data analysis",
    "description": "Test the file upload API for CSV and Excel files, verify correct parsing, and validate AI-generated cleaning and visualization code execution triggered by natural language prompts.",
    "code": "import requests\nimport os\nimport time\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_csv_excel_file_upload_and_ai_data_analysis():\n    session = requests.Session()\n\n    # Step 1: Signup a new user to get JWT token\n    signup_payload = {\n        \"name\": f\"testuser_{int(time.time())}\",\n        \"email\": f\"testuser_{int(time.time())}@example.com\",\n        \"password\": \"TestPassword123!\"\n    }\n    signup_resp = session.post(\n        f\"{BASE_URL}/api/auth/signup\",\n        json=signup_payload,\n        timeout=TIMEOUT\n    )\n    assert signup_resp.status_code == 201 or signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n\n    # Login is fixed but if signup returns token, otherwise login needed\n    # Assuming signup returns no token, do login\n\n    login_payload = {\n        \"email\": signup_payload[\"email\"],\n        \"password\": signup_payload[\"password\"]\n    }\n    login_resp = session.post(\n        f\"{BASE_URL}/api/auth/login\",\n        json=login_payload,\n        timeout=TIMEOUT\n    )\n    assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n    login_data = login_resp.json()\n    assert \"token\" in login_data, \"Login response missing token\"\n    token = login_data[\"token\"]\n    headers = {\n        \"Authorization\": f\"Bearer {token}\"\n    }\n\n    # Step 2: Create a new project to upload files into\n    project_name = f\"testproject_{int(time.time())}\"\n    create_project_payload = {\"name\": project_name}\n    project_resp = session.post(\n        f\"{BASE_URL}/api/projects/route\",\n        headers=headers,\n        json=create_project_payload,\n        timeout=TIMEOUT\n    )\n    assert project_resp.status_code == 201 or project_resp.status_code == 200, f\"Project creation failed: {project_resp.text}\"\n    project_data = project_resp.json()\n    assert \"id\" in project_data, \"Project creation response missing project id\"\n    project_id = project_data[\"id\"]\n\n    try:\n        # Prepare file paths (in-memory or example content)\n        csv_content = (\n            \"Name,Age,Salary\\n\"\n            \"Alice,30,70000\\n\"\n            \"Bob,25,48000\\n\"\n            \"Charlie,35,120000\\n\"\n        )\n        excel_content_bytes = None\n        try:\n            import pandas as pd\n            from io import BytesIO\n            df = pd.DataFrame({\n                \"Name\": [\"David\", \"Eva\", \"Frank\"],\n                \"Age\": [40, 29, 50],\n                \"Salary\": [90000, 60000, 110000]\n            })\n            excel_buffer = BytesIO()\n            df.to_excel(excel_buffer, index=False)\n            excel_content_bytes = excel_buffer.getvalue()\n        except ImportError:\n            # If pandas not available, fallback to a minimal XLSX byte content\n            excel_content_bytes = b\"PK\\x03\\x04\"  # Minimal dummy XLSX content just for upload\n\n        # Step 3: Upload CSV file\n        files = {\n            \"file\": (\"testfile.csv\", csv_content, \"text/csv\")\n        }\n        upload_resp_csv = session.post(\n            f\"{BASE_URL}/api/upload/route\",\n            headers=headers,\n            files=files,\n            data={\"projectId\": project_id},\n            timeout=TIMEOUT\n        )\n        assert upload_resp_csv.status_code == 200, f\"CSV file upload failed: {upload_resp_csv.text}\"\n        upload_csv_data = upload_resp_csv.json()\n        assert \"fileId\" in upload_csv_data, \"CSV upload response missing fileId\"\n        csv_file_id = upload_csv_data[\"fileId\"]\n\n        # Step 4: Upload Excel file\n        files = {\n            \"file\": (\"testfile.xlsx\", excel_content_bytes, \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\")\n        }\n        upload_resp_excel = session.post(\n            f\"{BASE_URL}/api/upload/route\",\n            headers=headers,\n            files=files,\n            data={\"projectId\": project_id},\n            timeout=TIMEOUT\n        )\n        assert upload_resp_excel.status_code == 200, f\"Excel file upload failed: {upload_resp_excel.text}\"\n        upload_excel_data = upload_resp_excel.json()\n        assert \"fileId\" in upload_excel_data, \"Excel upload response missing fileId\"\n        excel_file_id = upload_excel_data[\"fileId\"]\n\n        # Step 5: Send natural language prompt to AI assist endpoint for analysis/cleaning/visualization code\n        # Use sample prompt about cleaning and visualizing the uploaded CSV file\n        prompt = (\n            \"Please generate Python code to clean the uploaded dataset by removing rows where Age is under 30 \"\n            \"and create a visualization of Salary by Name using matplotlib.\"\n        )\n\n        ai_assist_payload = {\n            \"projectId\": project_id,\n            \"fileId\": csv_file_id,\n            \"prompt\": prompt\n        }\n        ai_resp = session.post(\n            f\"{BASE_URL}/api/ai/assist\",\n            headers=headers,\n            json=ai_assist_payload,\n            timeout=TIMEOUT\n        )\n        assert ai_resp.status_code == 200, f\"AI assist request failed: {ai_resp.text}\"\n        ai_data = ai_resp.json()\n        assert \"generatedCode\" in ai_data, \"AI assist response missing generatedCode\"\n        generated_code = ai_data[\"generatedCode\"]\n        assert isinstance(generated_code, str) and len(generated_code) > 0, \"Generated code is empty\"\n\n        # Step 6: Execute the generated Python code via code execute endpoint\n        execute_payload = {\n            \"projectId\": project_id,\n            \"code\": generated_code\n        }\n        execute_resp = session.post(\n            f\"{BASE_URL}/api/code/execute\",\n            headers=headers,\n            json=execute_payload,\n            timeout=TIMEOUT\n        )\n        assert execute_resp.status_code == 200, f\"Code execution request failed: {execute_resp.text}\"\n        execute_data = execute_resp.json()\n        # Expect keys like stdout, stderr, executionTime\n        assert \"stdout\" in execute_data, \"Execution response missing stdout\"\n        assert \"stderr\" in execute_data, \"Execution response missing stderr\"\n        assert \"executionTime\" in execute_data, \"Execution response missing executionTime\"\n        # No stderr output expected ideally\n        assert execute_data[\"stderr\"] == \"\" or execute_data[\"stderr\"] is None, f\"Code execution stderr: {execute_data['stderr']}\"\n        # stdout should contain matplotlib plot info or indication of success\n        assert len(execute_data[\"stdout\"]) > 0, \"Execution stdout empty\"\n\n    finally:\n        # Cleanup: delete uploaded files and project\n        # Delete uploaded CSV file\n        try:\n            session.delete(\n                f\"{BASE_URL}/api/files/project\",\n                headers=headers,\n                params={\"projectId\": project_id, \"fileId\": csv_file_id},\n                timeout=TIMEOUT\n            )\n        except Exception:\n            pass\n        # Delete uploaded Excel file\n        try:\n            session.delete(\n                f\"{BASE_URL}/api/files/project\",\n                headers=headers,\n                params={\"projectId\": project_id, \"fileId\": excel_file_id},\n                timeout=TIMEOUT\n            )\n        except Exception:\n            pass\n        # Delete project\n        try:\n            session.delete(\n                f\"{BASE_URL}/api/projects/route\",\n                headers=headers,\n                params={\"projectId\": project_id},\n                timeout=TIMEOUT\n            )\n        except Exception:\n            pass\n\ntest_csv_excel_file_upload_and_ai_data_analysis()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 193, in <module>\n  File \"<string>\", line 53, in test_csv_excel_file_upload_and_ai_data_analysis\nAssertionError: Project creation failed: <!DOCTYPE html><html lang=\"en\"><head><meta charSet=\"utf-8\"/><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/><link rel=\"stylesheet\" href=\"/_next/static/chunks/src_app_globals_b805903d.css\" data-precedence=\"next_static/chunks/src_app_globals_b805903d.css\"/><link rel=\"preload\" as=\"script\" fetchPriority=\"low\" href=\"/_next/static/chunks/%5Bturbopack%5D_browser_dev_hmr-client_hmr-client_ts_fd44f5a4._.js\"/><script src=\"/_next/static/chunks/node_modules_next_dist_compiled_2ce9398a._.js\" async=\"\"></script><script src=\"/_next/static/chunks/node_modules_next_dist_client_8f19e6fb._.js\" async=\"\"></script><script src=\"/_next/static/chunks/node_modules_next_dist_2ecbf5fa._.js\" async=\"\"></script><script src=\"/_next/static/chunks/node_modules_%40swc_helpers_cjs_00636ac3._.js\" async=\"\"></script><script src=\"/_next/static/chunks/_e69f0d32._.js\" async=\"\"></script><script src=\"/_next/static/chunks/_93808211._.js\" async=\"\"></script><script src=\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\" async=\"\"></script><script src=\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\" async=\"\"></script><script src=\"/_next/static/chunks/node_modules_abf16372._.js\" async=\"\"></script><script src=\"/_next/static/chunks/src_50730ecd._.js\" async=\"\"></script><script src=\"/_next/static/chunks/src_app_layout_tsx_c0237562._.js\" async=\"\"></script><meta name=\"robots\" content=\"noindex\"/><title>404: This page could not be found.</title><link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"/><link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin=\"anonymous\"/><link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;family=Source+Code+Pro:wght@400;500;600&amp;display=swap\" rel=\"stylesheet\"/><title>PyCode AI</title><meta name=\"description\" content=\"Code Python Anywhere, Anytime with AI\"/><link rel=\"icon\" href=\"/favicon.ico?favicon.a7a13c43.ico\" sizes=\"32x32\" type=\"image/x-icon\"/><script>document.querySelectorAll('body link[rel=\"icon\"], body link[rel=\"apple-touch-icon\"]').forEach(el => document.head.appendChild(el))</script><script src=\"/_next/static/chunks/node_modules_next_dist_build_polyfills_polyfill-nomodule.js\" noModule=\"\"></script></head><body class=\"min-h-screen bg-background font-body antialiased\"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div style=\"font-family:system-ui,&quot;Segoe UI&quot;,Roboto,Helvetica,Arial,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;;height:100vh;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center\"><div><style>body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}</style><h1 class=\"next-error-h1\" style=\"display:inline-block;margin:0 20px 0 0;padding:0 23px 0 0;font-size:24px;font-weight:500;vertical-align:top;line-height:49px\">404</h1><div style=\"display:inline-block\"><h2 style=\"font-size:14px;font-weight:400;line-height:49px;margin:0\">This page could not be found.</h2></div></div></div><!--$--><!--/$--><!--$--><!--/$--><div role=\"region\" aria-label=\"Notifications (F8)\" tabindex=\"-1\" style=\"pointer-events:none\"><ol tabindex=\"-1\" class=\"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\"></ol></div><script src=\"/_next/static/chunks/%5Bturbopack%5D_browser_dev_hmr-client_hmr-client_ts_fd44f5a4._.js\" async=\"\"></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,\"3:\\\"$Sreact.fragment\\\"\\n5:I[\\\"[project]/node_modules/next/dist/client/components/layout-router.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"default\\\"]\\n6:I[\\\"[project]/node_modules/next/dist/client/components/render-from-template-context.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"default\\\"]\\n8:I[\\\"[project]/src/components/providers/theme-provider.tsx [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_abf16372._.js\\\",\\\"/_next/static/chunks/src_50730ecd._.js\\\",\\\"/_next/static/chunks/src_app_layout_tsx_c0237562._.js\\\"],\\\"ThemeProvider\\\"]\\nc:I[\\\"[project]/src/components/ui/toaster.tsx [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_abf16372._.js\\\",\\\"/_next/static/chunks/src_50730ecd._.js\\\",\\\"/_next/static/chunks/src_app_layout_tsx_c0237562._.js\\\"],\\\"Toaster\\\"]\\n13:I[\\\"[project]/node_modules/next/dist/client/components/metadata/metadata-boundary.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"MetadataBoundary\\\"]\\n16:I[\\\"[project]/node_modules/next/dist/client/components/metadata/metadata-boundary.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"OutletBoundary\\\"]\\n1d:I[\\\"[project]/node_modules/next/dist/client/components/metadata/async-metadata.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"AsyncMetadataOutlet\\\"]\\n23:I[\\\"[project]/node_modules/next/dist/client/components/metadata/metadata-boundary.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"ViewportBoundary\\\"]\\n29:I[\\\"[project]/node_modules/next/\"])</script><script>self.__next_f.push([1,\"dist/client/components/error-boundary.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"default\\\"]\\n2a:\\\"$Sreact.suspense\\\"\\n2b:I[\\\"[project]/node_modules/next/dist/client/components/metadata/async-metadata.js [app-client] (ecmascript)\\\",[\\\"/_next/static/chunks/node_modules_next_dist_1a6ee436._.js\\\",\\\"/_next/static/chunks/src_app_favicon_ico_mjs_8a7a8fdc._.js\\\"],\\\"AsyncMetadata\\\"]\\n:HL[\\\"/_next/static/chunks/src_app_globals_b805903d.css\\\",\\\"style\\\"]\\n2:{\\\"name\\\":\\\"Preloads\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{\\\"preloadCallbacks\\\":[\\\"$E(()=\\u003e{ctx.componentMod.preloadStyle(fullHref,ctx.renderOpts.crossOrigin,ctx.nonce)})\\\"]}}\\n1:D\\\"$2\\\"\\n1:null\\n7:{\\\"name\\\":\\\"RootLayout\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{\\\"children\\\":[\\\"$\\\",\\\"$L5\\\",null,{\\\"parallelRouterKey\\\":\\\"children\\\",\\\"error\\\":\\\"$undefined\\\",\\\"errorStyles\\\":\\\"$undefined\\\",\\\"errorScripts\\\":\\\"$undefined\\\",\\\"template\\\":[\\\"$\\\",\\\"$3\\\",null,{\\\"children\\\":[\\\"$\\\",\\\"$L6\\\",null,{},null,[],1]},null,[],0],\\\"templateStyles\\\":\\\"$undefined\\\",\\\"templateScripts\\\":\\\"$undefined\\\",\\\"notFound\\\":\\\"$Y\\\",\\\"forbidden\\\":\\\"$undefined\\\",\\\"unauthorized\\\":\\\"$undefined\\\"},null,[],1],\\\"params\\\":\\\"$Y\\\"}}\\n4:D\\\"$7\\\"\\na:{\\\"name\\\":\\\"NotFound\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{}}\\n9:D\\\"$a\\\"\\nb:{\\\"name\\\":\\\"HTTPAccessErrorFallback\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":\\\"$a\\\",\\\"stack\\\":[],\\\"props\\\":{\\\"status\\\":404,\\\"message\\\":\\\"This page could not be found.\\\"}}\\n9:D\\\"$b\\\"\\n9:[[\\\"$\\\",\\\"title\\\",null,{\\\"children\\\":\\\"404: This page could not be found.\\\"},\\\"$b\\\",[],1],[\\\"$\\\",\\\"div\\\",null,{\\\"style\\\":{\\\"fontFamily\\\":\\\"system-ui,\\\\\\\"Segoe UI\\\\\\\",Roboto,Helvetica,Arial,sans-serif,\\\\\\\"Apple Color Emoji\\\\\\\",\\\\\\\"Segoe UI Emoji\\\\\\\"\\\",\\\"height\\\":\\\"100vh\\\",\\\"textAlign\\\":\\\"center\\\",\\\"display\\\":\\\"flex\\\",\\\"flexDirection\\\":\\\"column\\\",\\\"alignItems\\\":\\\"center\\\",\\\"justifyContent\\\":\\\"center\\\"},\\\"children\\\":[\\\"$\\\",\\\"div\\\",null,{\\\"children\\\":[[\\\"$\\\",\\\"style\\\",null,{\\\"dangerouslySetInnerHTML\\\":{\\\"__html\\\":\\\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#\"])</script><script>self.__next_f.push([1,\"fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\\\"}},\\\"$b\\\",[],1],[\\\"$\\\",\\\"h1\\\",null,{\\\"className\\\":\\\"next-error-h1\\\",\\\"style\\\":{\\\"display\\\":\\\"inline-block\\\",\\\"margin\\\":\\\"0 20px 0 0\\\",\\\"padding\\\":\\\"0 23px 0 0\\\",\\\"fontSize\\\":24,\\\"fontWeight\\\":500,\\\"verticalAlign\\\":\\\"top\\\",\\\"lineHeight\\\":\\\"49px\\\"},\\\"children\\\":404},\\\"$b\\\",[],1],[\\\"$\\\",\\\"div\\\",null,{\\\"style\\\":{\\\"display\\\":\\\"inline-block\\\"},\\\"children\\\":[\\\"$\\\",\\\"h2\\\",null,{\\\"style\\\":{\\\"fontSize\\\":14,\\\"fontWeight\\\":400,\\\"lineHeight\\\":\\\"49px\\\",\\\"margin\\\":0},\\\"children\\\":\\\"This page could not be found.\\\"},\\\"$b\\\",[],1]},\\\"$b\\\",[],1]]},\\\"$b\\\",[],1]},\\\"$b\\\",[],1]]\\n4:[\\\"$\\\",\\\"html\\\",null,{\\\"lang\\\":\\\"en\\\",\\\"suppressHydrationWarning\\\":true,\\\"children\\\":[[\\\"$\\\",\\\"head\\\",null,{\\\"children\\\":[[\\\"$\\\",\\\"link\\\",null,{\\\"rel\\\":\\\"preconnect\\\",\\\"href\\\":\\\"https://fonts.googleapis.com\\\"},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",124,272]],1],[\\\"$\\\",\\\"link\\\",null,{\\\"rel\\\":\\\"preconnect\\\",\\\"href\\\":\\\"https://fonts.gstatic.com\\\",\\\"crossOrigin\\\":\\\"anonymous\\\"},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",132,272]],1],[\\\"$\\\",\\\"link\\\",null,{\\\"href\\\":\\\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800\\u0026family=Source+Code+Pro:wght@400;500;600\\u0026display=swap\\\",\\\"rel\\\":\\\"stylesheet\\\"},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",141,272]],1]]},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",122,264]],1],[\\\"$\\\",\\\"body\\\",null,{\\\"className\\\":\\\"min-h-screen bg-background font-body antialiased\\\",\\\"children\\\":[\\\"$\\\",\\\"$L8\\\",null,{\\\"attribute\\\":\\\"class\\\",\\\"defaultTheme\\\":\\\"system\\\",\\\"enableSystem\\\":true,\\\"disableTransitionOnChange\\\":true,\\\"children\\\":[[\\\"$\\\",\\\"$L5\\\",null,{\\\"parallelRouterKey\\\":\\\"children\\\",\\\"error\\\":\\\"$undefined\\\",\\\"errorStyles\\\":\\\"$undefined\\\",\\\"errorScripts\\\":\\\"$undefined\\\",\\\"template\\\":[\\\"$\\\",\\\"$L6\\\",null,{},null,[],1],\\\"templateStyles\\\":\\\"$undefined\\\",\\\"templateScripts\\\":\\\"$undefined\\\",\\\"notFound\\\":[\\\"$9\\\",[]],\\\"forbidden\\\":\\\"$undefined\\\",\\\"unauthorized\\\":\\\"$undefined\\\"},null,[],1],[\\\"$\\\",\\\"$Lc\\\",null,{},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"\"])</script><script>self.__next_f.push([1,\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",164,276]],1]]},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",157,278]],1]},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",155,264]],1]]},\\\"$7\\\",[[\\\"RootLayout\\\",\\\"C:\\\\\\\\Users\\\\\\\\Atharv\\\\\\\\Downloads\\\\\\\\pyapp\\\\\\\\.next\\\\\\\\server\\\\\\\\chunks\\\\\\\\ssr\\\\\\\\_927648cb._.js\\\",118,263]],1]\\ne:{\\\"name\\\":\\\"NotFound\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{\\\"params\\\":\\\"$@\\\",\\\"searchParams\\\":\\\"$@\\\"}}\\nd:D\\\"$e\\\"\\nf:{\\\"name\\\":\\\"HTTPAccessErrorFallback\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":\\\"$e\\\",\\\"stack\\\":[],\\\"props\\\":{\\\"status\\\":404,\\\"message\\\":\\\"This page could not be found.\\\"}}\\nd:D\\\"$f\\\"\\nd:[[\\\"$\\\",\\\"title\\\",null,{\\\"children\\\":\\\"404: This page could not be found.\\\"},\\\"$f\\\",[],1],[\\\"$\\\",\\\"div\\\",null,{\\\"style\\\":\\\"$9:1:props:style\\\",\\\"children\\\":[\\\"$\\\",\\\"div\\\",null,{\\\"children\\\":[[\\\"$\\\",\\\"style\\\",null,{\\\"dangerouslySetInnerHTML\\\":{\\\"__html\\\":\\\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\\\"}},\\\"$f\\\",[],1],[\\\"$\\\",\\\"h1\\\",null,{\\\"className\\\":\\\"next-error-h1\\\",\\\"style\\\":\\\"$9:1:props:children:props:children:1:props:style\\\",\\\"children\\\":404},\\\"$f\\\",[],1],[\\\"$\\\",\\\"div\\\",null,{\\\"style\\\":\\\"$9:1:props:children:props:children:2:props:style\\\",\\\"children\\\":[\\\"$\\\",\\\"h2\\\",null,{\\\"style\\\":\\\"$9:1:props:children:props:children:2:props:children:props:style\\\",\\\"children\\\":\\\"This page could not be found.\\\"},\\\"$f\\\",[],1]},\\\"$f\\\",[],1]]},\\\"$f\\\",[],1]},\\\"$f\\\",[],1]]\\n11:{\\\"name\\\":\\\"\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{}}\\n10:D\\\"$11\\\"\\n12:{\\\"name\\\":\\\"MetadataTree\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{}}\\n10:D\\\"$12\\\"\\n15:{\\\"name\\\":\\\"__next_metadata_boundary__\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":\\\"$12\\\",\\\"stack\\\":[],\\\"props\\\":{}}\\n14:D\\\"$15\\\"\\n10:[\\\"$\\\",\\\"$L13\\\",null,{\\\"children\\\":\\\"$L14\\\"},\\\"$12\\\",[],1]\\n18:{\\\"name\\\":\\\"__next_outlet_boundary__\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{\\\"ready\\\":\\\"$E(asyn\"])</script><script>self.__next_f.push([1,\"c function getViewportReady() {\\\\n        await viewport();\\\\n        return undefined;\\\\n    })\\\"}}\\n17:D\\\"$18\\\"\\n1a:{\\\"name\\\":\\\"__next_outlet_boundary__\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{\\\"ready\\\":\\\"$E(async function getMetadataReady() {\\\\n        // Only warm up metadata() call when it's blocking metadata,\\\\n        // otherwise it will be fully managed by AsyncMetadata component.\\\\n        if (!serveStreamingMetadata) {\\\\n            await metadata();\\\\n        }\\\\n        return undefined;\\\\n    })\\\"}}\\n19:D\\\"$1a\\\"\\n1c:{\\\"name\\\":\\\"StreamingMetadataOutlet\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{}}\\n1b:D\\\"$1c\\\"\\n1b:[\\\"$\\\",\\\"$L1d\\\",null,{\\\"promise\\\":\\\"$@1e\\\"},\\\"$1c\\\",[],1]\\n20:{\\\"name\\\":\\\"NonIndex\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{\\\"pagePath\\\":\\\"/404\\\",\\\"statusCode\\\":404,\\\"isPossibleServerAction\\\":false}}\\n1f:D\\\"$20\\\"\\n1f:[\\\"$\\\",\\\"meta\\\",null,{\\\"name\\\":\\\"robots\\\",\\\"content\\\":\\\"noindex\\\"},null,[],1]\\n22:{\\\"name\\\":\\\"ViewportTree\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":\\\"IlqefyN1ti7Nh_xIf53MD\\\",\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{}}\\n21:D\\\"$22\\\"\\n25:{\\\"name\\\":\\\"__next_viewport_boundary__\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":\\\"$22\\\",\\\"stack\\\":[],\\\"props\\\":{}}\\n24:D\\\"$25\\\"\\n21:[\\\"$\\\",\\\"$3\\\",\\\"IlqefyN1ti7Nh_xIf53MD\\\",{\\\"children\\\":[[\\\"$\\\",\\\"$L23\\\",null,{\\\"children\\\":\\\"$L24\\\"},\\\"$22\\\",[],1],null]},null,null,0]\\n27:{\\\"name\\\":\\\"\\\",\\\"env\\\":\\\"Server\\\",\\\"key\\\":null,\\\"owner\\\":null,\\\"stack\\\":[],\\\"props\\\":{}}\\n26:D\\\"$27\\\"\\n26:null\\n28:[]\\n0:{\\\"P\\\":\\\"$1\\\",\\\"b\\\":\\\"development\\\",\\\"p\\\":\\\"\\\",\\\"c\\\":[\\\"\\\",\\\"api\\\",\\\"projects\\\",\\\"route\\\"],\\\"i\\\":false,\\\"f\\\":[[[\\\"\\\",{\\\"children\\\":[\\\"/_not-found\\\",{\\\"children\\\":[\\\"__PAGE__\\\",{}]}]},\\\"$undefined\\\",\\\"$undefined\\\",true],[\\\"\\\",[\\\"$\\\",\\\"$3\\\",\\\"c\\\",{\\\"children\\\":[[[\\\"$\\\",\\\"link\\\",\\\"0\\\",{\\\"rel\\\":\\\"stylesheet\\\",\\\"href\\\":\\\"/_next/static/chunks/src_app_globals_b805903d.css\\\",\\\"precedence\\\":\\\"next_static/chunks/src_app_globals_b805903d.css\\\",\\\"crossOrigin\\\":\\\"$undefined\\\",\\\"nonce\\\":\\\"$undefined\\\"},null,[],0],[\\\"$\\\",\\\"script\\\",\\\"script-0\\\",{\\\"src\\\":\\\"/_next/static/chunks/node_modules_abf16372._.js\\\",\\\"async\\\":true,\\\"nonce\\\":\\\"$undefined\\\"},null,[],0],[\\\"$\\\",\\\"script\\\",\\\"script-1\\\",{\\\"src\\\":\\\"/_next/static/chunks/src_50730ecd._.js\\\",\\\"async\\\":true,\\\"nonce\\\":\\\"$undefined\\\"},null,[],0],[\\\"$\\\",\\\"\"])</script><script>self.__next_f.push([1,\"script\\\",\\\"script-2\\\",{\\\"src\\\":\\\"/_next/static/chunks/src_app_layout_tsx_c0237562._.js\\\",\\\"async\\\":true,\\\"nonce\\\":\\\"$undefined\\\"},null,[],0]],\\\"$4\\\"]},null,[],0],{\\\"children\\\":[\\\"/_not-found\\\",[\\\"$\\\",\\\"$3\\\",\\\"c\\\",{\\\"children\\\":[null,[\\\"$\\\",\\\"$L5\\\",null,{\\\"parallelRouterKey\\\":\\\"children\\\",\\\"error\\\":\\\"$undefined\\\",\\\"errorStyles\\\":\\\"$undefined\\\",\\\"errorScripts\\\":\\\"$undefined\\\",\\\"template\\\":[\\\"$\\\",\\\"$L6\\\",null,{},null,[],1],\\\"templateStyles\\\":\\\"$undefined\\\",\\\"templateScripts\\\":\\\"$undefined\\\",\\\"notFound\\\":\\\"$undefined\\\",\\\"forbidden\\\":\\\"$undefined\\\",\\\"unauthorized\\\":\\\"$undefined\\\"},null,[],1]]},null,[],0],{\\\"children\\\":[\\\"__PAGE__\\\",[\\\"$\\\",\\\"$3\\\",\\\"c\\\",{\\\"children\\\":[\\\"$d\\\",\\\"$10\\\",null,[\\\"$\\\",\\\"$L16\\\",null,{\\\"children\\\":[\\\"$L17\\\",\\\"$L19\\\",\\\"$1b\\\"]},null,[],1]]},null,[],0],{},null,false]},null,false]},null,false],[\\\"$\\\",\\\"$3\\\",\\\"h\\\",{\\\"children\\\":[\\\"$1f\\\",\\\"$21\\\",\\\"$26\\\"]},null,[],0],false]],\\\"m\\\":\\\"$W28\\\",\\\"G\\\":[\\\"$29\\\",\\\"$undefined\\\"],\\\"s\\\":false,\\\"S\\\":false}\\n14:[\\\"$\\\",\\\"$2a\\\",null,{\\\"fallback\\\":null,\\\"children\\\":[\\\"$\\\",\\\"$L2b\\\",null,{\\\"promise\\\":\\\"$@2c\\\"},\\\"$15\\\",[],1]},\\\"$15\\\",[],1]\\n19:null\\n24:[[\\\"$\\\",\\\"meta\\\",\\\"0\\\",{\\\"charSet\\\":\\\"utf-8\\\"},\\\"$18\\\",[],0],[\\\"$\\\",\\\"meta\\\",\\\"1\\\",{\\\"name\\\":\\\"viewport\\\",\\\"content\\\":\\\"width=device-width, initial-scale=1\\\"},\\\"$18\\\",[],0]]\\n17:null\\n\"])</script><script>self.__next_f.push([1,\"2c:{\\\"metadata\\\":[[\\\"$\\\",\\\"title\\\",\\\"0\\\",{\\\"children\\\":\\\"PyCode AI\\\"},\\\"$15\\\",[],0],[\\\"$\\\",\\\"meta\\\",\\\"1\\\",{\\\"name\\\":\\\"description\\\",\\\"content\\\":\\\"Code Python Anywhere, Anytime with AI\\\"},\\\"$15\\\",[],0],[\\\"$\\\",\\\"link\\\",\\\"2\\\",{\\\"rel\\\":\\\"icon\\\",\\\"href\\\":\\\"/favicon.ico?favicon.a7a13c43.ico\\\",\\\"sizes\\\":\\\"32x32\\\",\\\"type\\\":\\\"image/x-icon\\\"},\\\"$15\\\",[],0]],\\\"error\\\":null,\\\"digest\\\":\\\"$undefined\\\"}\\n1e:{\\\"metadata\\\":\\\"$2c:metadata\\\",\\\"error\\\":null,\\\"digest\\\":\\\"$undefined\\\"}\\n\"])</script></body></html>\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.616Z",
    "modified": "2025-11-01T09:24:56.190Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "7a6c4136-0c6c-449d-8bfe-b827eb145521",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC006-file management create rename delete",
    "description": "Verify file management API endpoints for creating, renaming, and deleting files and folders within projects, ensuring changes are reflected in the project file tree and persisted.",
    "code": "import requests\nimport uuid\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_file_management_create_rename_delete():\n    # Signup a new user to get JWT token for auth\n    signup_url = f\"{BASE_URL}/api/auth/signup\"\n    name = f\"testuser_{uuid.uuid4().hex[:8]}\"\n    password = \"TestPass123!\"\n\n    signup_payload = {\n        \"name\": name,\n        \"password\": password,\n        \"email\": f\"{name}@test.com\"\n    }\n    signup_resp = requests.post(signup_url, json=signup_payload, timeout=TIMEOUT)\n    assert signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n\n    # Login to get JWT token\n    login_url = f\"{BASE_URL}/api/auth/login\"\n    login_payload = {\n        \"name\": name,\n        \"password\": password\n    }\n    login_resp = requests.post(login_url, json=login_payload, timeout=TIMEOUT)\n    assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n    login_json = login_resp.json()\n    assert \"token\" in login_json, \"JWT token missing in login response\"\n    token = login_json[\"token\"]\n\n    headers = {\n        \"Authorization\": f\"Bearer {token}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    # Step 1: Create a project for file management tests\n    project_create_url = f\"{BASE_URL}/api/projects\"\n    project_name = f\"TestProject_{uuid.uuid4().hex[:8]}\"\n    project_payload = {\n        \"name\": project_name,\n        \"description\": \"Project for file management TC006\"\n    }\n    project_create_resp = requests.post(project_create_url, json=project_payload, headers=headers, timeout=TIMEOUT)\n    assert project_create_resp.status_code == 201, f\"Project creation failed: {project_create_resp.text}\"\n    project_data = project_create_resp.json()\n    project_id = project_data.get(\"id\")\n    assert project_id, \"Created project ID missing\"\n\n    try:\n        # Step 2: Create a file in the project\n        file_create_url = f\"{BASE_URL}/api/projects/{project_id}/files\"\n        filename = \"test_file.py\"\n        file_payload = {\n            \"name\": filename,\n            \"type\": \"file\",\n            \"content\": \"# Initial content\\nprint('Hello World')\"\n        }\n        file_create_resp = requests.post(file_create_url, json=file_payload, headers=headers, timeout=TIMEOUT)\n        assert file_create_resp.status_code == 201, f\"File creation failed: {file_create_resp.text}\"\n        file_data = file_create_resp.json()\n        file_id = file_data.get(\"id\")\n        assert file_id, \"Created file ID missing\"\n\n        # Step 3: Verify file appears in project file tree\n        file_tree_url = f\"{BASE_URL}/api/projects/{project_id}/files\"\n        file_tree_resp = requests.get(file_tree_url, headers=headers, timeout=TIMEOUT)\n        assert file_tree_resp.status_code == 200, f\"Fetching file tree failed: {file_tree_resp.text}\"\n        files_list = file_tree_resp.json()\n        assert any(f.get(\"id\") == file_id and f.get(\"name\") == filename for f in files_list), \"File not found in file tree after creation\"\n\n        # Step 4: Rename the created file\n        file_rename_url = f\"{BASE_URL}/api/projects/{project_id}/files/{file_id}\"\n        new_filename = \"renamed_test_file.py\"\n        rename_payload = {\n            \"name\": new_filename\n        }\n        file_rename_resp = requests.put(file_rename_url, json=rename_payload, headers=headers, timeout=TIMEOUT)\n        assert file_rename_resp.status_code == 200, f\"File rename failed: {file_rename_resp.text}\"\n        renamed_file_data = file_rename_resp.json()\n        assert renamed_file_data.get(\"name\") == new_filename, \"File rename not reflected in response\"\n\n        # Step 5: Verify rename in project file tree\n        file_tree_resp_after_rename = requests.get(file_tree_url, headers=headers, timeout=TIMEOUT)\n        assert file_tree_resp_after_rename.status_code == 200, f\"Fetching file tree failed: {file_tree_resp_after_rename.text}\"\n        files_list_after_rename = file_tree_resp_after_rename.json()\n        assert any(f.get(\"id\") == file_id and f.get(\"name\") == new_filename for f in files_list_after_rename), \"Renamed file not found in file tree\"\n\n        # Step 6: Create a folder in the project\n        folder_create_payload = {\n            \"name\": \"test_folder\",\n            \"type\": \"folder\"\n        }\n        folder_create_resp = requests.post(file_create_url, json=folder_create_payload, headers=headers, timeout=TIMEOUT)\n        assert folder_create_resp.status_code == 201, f\"Folder creation failed: {folder_create_resp.text}\"\n        folder_data = folder_create_resp.json()\n        folder_id = folder_data.get(\"id\")\n        assert folder_id, \"Created folder ID missing\"\n\n        # Step 7: Rename the folder\n        folder_rename_url = f\"{BASE_URL}/api/projects/{project_id}/files/{folder_id}\"\n        folder_new_name = \"renamed_test_folder\"\n        folder_rename_payload = {\n            \"name\": folder_new_name\n        }\n        folder_rename_resp = requests.put(folder_rename_url, json=folder_rename_payload, headers=headers, timeout=TIMEOUT)\n        assert folder_rename_resp.status_code == 200, f\"Folder rename failed: {folder_rename_resp.text}\"\n        folder_rename_data = folder_rename_resp.json()\n        assert folder_rename_data.get(\"name\") == folder_new_name, \"Folder rename not reflected in response\"\n\n        # Step 8: Verify folder rename in file tree\n        file_tree_resp_after_folder_rename = requests.get(file_tree_url, headers=headers, timeout=TIMEOUT)\n        assert file_tree_resp_after_folder_rename.status_code == 200, f\"Fetching file tree failed: {file_tree_resp_after_folder_rename.text}\"\n        files_list_after_folder_rename = file_tree_resp_after_folder_rename.json()\n        assert any(f.get(\"id\") == folder_id and f.get(\"name\") == folder_new_name for f in files_list_after_folder_rename), \"Renamed folder not found in file tree\"\n\n        # Step 9: Delete the file\n        file_delete_url = f\"{BASE_URL}/api/projects/{project_id}/files/{file_id}\"\n        file_delete_resp = requests.delete(file_delete_url, headers=headers, timeout=TIMEOUT)\n        assert file_delete_resp.status_code == 204, f\"File deletion failed: {file_delete_resp.text}\"\n\n        # Step 10: Verify file removed from file tree\n        file_tree_resp_after_file_delete = requests.get(file_tree_url, headers=headers, timeout=TIMEOUT)\n        assert file_tree_resp_after_file_delete.status_code == 200, f\"Fetching file tree failed: {file_tree_resp_after_file_delete.text}\"\n        files_list_after_file_delete = file_tree_resp_after_file_delete.json()\n        assert all(f.get(\"id\") != file_id for f in files_list_after_file_delete), \"Deleted file still present in file tree\"\n\n        # Step 11: Delete the folder\n        folder_delete_url = f\"{BASE_URL}/api/projects/{project_id}/files/{folder_id}\"\n        folder_delete_resp = requests.delete(folder_delete_url, headers=headers, timeout=TIMEOUT)\n        assert folder_delete_resp.status_code == 204, f\"Folder deletion failed: {folder_delete_resp.text}\"\n\n        # Step 12: Verify folder removed from file tree\n        file_tree_resp_after_folder_delete = requests.get(file_tree_url, headers=headers, timeout=TIMEOUT)\n        assert file_tree_resp_after_folder_delete.status_code == 200, f\"Fetching file tree failed: {file_tree_resp_after_folder_delete.text}\"\n        files_list_after_folder_delete = file_tree_resp_after_folder_delete.json()\n        assert all(f.get(\"id\") != folder_id for f in files_list_after_folder_delete), \"Deleted folder still present in file tree\"\n\n    finally:\n        # Cleanup: Delete the project to remove test data\n        project_delete_url = f\"{BASE_URL}/api/projects/{project_id}\"\n        requests.delete(project_delete_url, headers=headers, timeout=TIMEOUT)\n        # Also attempt logout\n        logout_url = f\"{BASE_URL}/api/auth/logout\"\n        try:\n            requests.post(logout_url, headers=headers, timeout=TIMEOUT)\n        except Exception:\n            pass\n\ntest_file_management_create_rename_delete()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 151, in <module>\n  File \"<string>\", line 28, in test_file_management_create_rename_delete\nAssertionError: Login failed: {\"error\":\"Email and password are required\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.622Z",
    "modified": "2025-11-01T09:24:49.837Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "c00c854d-5d9c-4cc1-a53f-5b0a7cd095d1",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC007-terminal shell command execution",
    "description": "Test the integrated terminal API endpoints for running shell commands, installing packages, and managing the Python environment within the cloud IDE.",
    "code": "import requests\nimport json\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_terminal_shell_command_execution():\n    session = requests.Session()\n    try:\n        # 1. Sign up a new user\n        signup_url = f\"{BASE_URL}/api/auth/signup\"\n        signup_payload = {\n            \"name\": \"testuser_tc007\",\n            \"email\": \"testuser_tc007@example.com\",\n            \"password\": \"StrongPass!234\"\n        }\n        signup_resp = session.post(signup_url, json=signup_payload, timeout=TIMEOUT)\n        assert signup_resp.status_code == 201 or signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n        \n        # 2. Login to get JWT token\n        login_url = f\"{BASE_URL}/api/auth/login\"\n        login_payload = {\n            \"email\": signup_payload[\"email\"],\n            \"password\": signup_payload[\"password\"]\n        }\n        login_resp = session.post(login_url, json=login_payload, timeout=TIMEOUT)\n        assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n        login_data = login_resp.json()\n        token = login_data.get(\"token\") or login_data.get(\"access_token\")\n        assert token is not None, \"JWT token not found in login response\"\n        \n        headers = {\n            \"Authorization\": f\"Bearer {token}\",\n            \"Content-Type\": \"application/json\"\n        }\n\n        # 3. Run a simple shell command via terminal API\n        # Assume endpoint: POST /api/terminal/execute with payload { \"command\": \"<cmd>\" }\n        terminal_exec_url = f\"{BASE_URL}/api/terminal/execute\"\n        command_payload = {\"command\": \"echo Hello from terminal\"}\n        exec_resp = session.post(terminal_exec_url, headers=headers, json=command_payload, timeout=TIMEOUT)\n        assert exec_resp.status_code == 200, f\"Shell command execution failed: {exec_resp.text}\"\n        exec_data = exec_resp.json()\n        assert \"stdout\" in exec_data, \"No stdout in response\"\n        assert \"Hello from terminal\" in exec_data[\"stdout\"], \"Unexpected output from shell command\"\n\n        # 4. Install a package via terminal API\n        # Assume endpoint: POST /api/terminal/install-all-packages triggers installation (can also accept packages)\n        install_url = f\"{BASE_URL}/api/terminal/install-all-packages\"\n        install_resp = session.post(install_url, headers=headers, timeout=120)\n        # Could be async, so check for accepted or success status or detailed response\n        assert install_resp.status_code in [200,202], f\"Package installation failed: {install_resp.text}\"\n        install_data = install_resp.json()\n        # Assume returns a status field or message\n        assert \"status\" in install_data or \"message\" in install_data\n\n        # 5. Manage Python environment: Run a command to list installed packages: `pip list`\n        pip_list_payload = {\"command\": \"pip list\"}\n        pip_list_resp = session.post(terminal_exec_url, headers=headers, json=pip_list_payload, timeout=TIMEOUT)\n        assert pip_list_resp.status_code == 200, f\"pip list command failed: {pip_list_resp.text}\"\n        pip_list_data = pip_list_resp.json()\n        assert \"stdout\" in pip_list_data, \"No stdout in pip list response\"\n        # Check if package 'pip' itself is listed as a sanity check\n        assert \"pip\" in pip_list_data[\"stdout\"].lower(), \"pip not listed in installed packages\"\n\n    finally:\n        # Logout\n        logout_url = f\"{BASE_URL}/api/auth/logout\"\n        try:\n            logout_resp = session.post(logout_url, headers=headers, timeout=TIMEOUT)\n            assert logout_resp.status_code == 200, f\"Logout failed: {logout_resp.text}\"\n        except Exception:\n            pass\n\ntest_terminal_shell_command_execution()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 75, in <module>\n  File \"<string>\", line 18, in test_terminal_shell_command_execution\nAssertionError: Signup failed: {\"error\":\"User with this email already exists\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.627Z",
    "modified": "2025-11-01T09:24:19.777Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "d354ee0c-09c6-41c0-b479-067d7f6808c9",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC008-file upload drag and drop validation",
    "description": "Validate the file upload API for drag-and-drop functionality, file type validation, and automatic integration of uploaded files into the project file tree.",
    "code": "import requests\nimport json\nimport os\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_file_upload_drag_and_drop_validation():\n    session = requests.Session()\n    try:\n        # Step 1: Signup a new user\n        signup_payload = {\n            \"name\": \"testuser_dragdrop\",\n            \"email\": \"testuser_dragdrop@example.com\",\n            \"password\": \"TestPassword123!\"\n        }\n        signup_resp = session.post(\n            f\"{BASE_URL}/api/auth/signup\",\n            json=signup_payload,\n            timeout=TIMEOUT\n        )\n        assert signup_resp.status_code == 201 or signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n\n        # For demonstration, let's login explicitly to get JWT\n        login_payload = {\n            \"email\": signup_payload[\"email\"],\n            \"password\": signup_payload[\"password\"]\n        }\n        login_resp = session.post(\n            f\"{BASE_URL}/api/auth/login\",\n            json=login_payload,\n            timeout=TIMEOUT\n        )\n        assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n        login_data = login_resp.json()\n        token = login_data.get(\"token\") or login_data.get(\"access_token\")\n        assert token, \"JWT token not found in login response\"\n\n        session.headers.update({\"Authorization\": f\"Bearer {token}\"})\n\n        # Step 2: Create a new project to upload files into\n        project_payload = {\"name\": \"dragdrop_test_project\"}\n        project_resp = session.post(\n            f\"{BASE_URL}/api/projects\",\n            json=project_payload,\n            timeout=TIMEOUT\n        )\n        assert project_resp.status_code == 201 or project_resp.status_code == 200, f\"Project creation failed: {project_resp.text}\"\n        project_data = project_resp.json()\n        project_id = project_data.get(\"id\")\n        assert project_id, \"Project ID not returned after creation\"\n\n        # Prepare paths for upload tests\n        valid_filename = \"test_file.py\"\n        invalid_filename = \"test_file.exe\"\n\n        # Create dummy files for upload\n        valid_file_content = b\"print('Hello from valid file')\"\n        invalid_file_content = b\"MZ\\x90\\x00\\x03\\x00\\x00\\x00\"  # Beginning bytes of a PE executable\n\n        # Write dummy files locally\n        with open(valid_filename, \"wb\") as f:\n            f.write(valid_file_content)\n        with open(invalid_filename, \"wb\") as f:\n            f.write(invalid_file_content)\n\n        try:\n            # Step 3: Upload valid file using drag and drop simulation\n            with open(valid_filename, \"rb\") as f:\n                files = {\n                    \"file\": (valid_filename, f, \"text/x-python-script\")\n                }\n                upload_resp = session.post(\n                    f\"{BASE_URL}/api/upload?projectId={project_id}\",\n                    files=files,\n                    timeout=TIMEOUT\n                )\n            assert upload_resp.status_code == 200, f\"Valid file upload failed: {upload_resp.text}\"\n            upload_data = upload_resp.json()\n            # Validate that file is integrated into project file tree endpoint\n            # Fetch project files tree\n            files_tree_resp = session.get(\n                f\"{BASE_URL}/api/files/project?projectId={project_id}\",\n                timeout=TIMEOUT\n            )\n            assert files_tree_resp.status_code == 200, f\"Failed to fetch project file tree: {files_tree_resp.text}\"\n            files_tree = files_tree_resp.json()\n            # Check the uploaded file is listed in the file tree\n            def file_in_tree(file_tree, filename):\n                for f in file_tree.get(\"files\", []):\n                    if f.get(\"name\") == filename:\n                        return True\n                    if \"children\" in f:\n                        if file_in_tree(f, filename):\n                            return True\n                return False\n\n            assert file_in_tree(files_tree, valid_filename), \"Uploaded valid file not found in project file tree\"\n\n            # Step 4: Upload invalid file type and expect rejection (e.g. .exe blocked)\n            with open(invalid_filename, \"rb\") as f:\n                files = {\n                    \"file\": (invalid_filename, f, \"application/x-msdownload\")\n                }\n                upload_resp_invalid = session.post(\n                    f\"{BASE_URL}/api/upload?projectId={project_id}\",\n                    files=files,\n                    timeout=TIMEOUT\n                )\n            # Assuming server returns 400 or 415 for invalid file types\n            assert upload_resp_invalid.status_code in (400, 415), f\"Invalid file type upload not rejected properly: {upload_resp_invalid.text}\"\n\n        finally:\n            # Clean up dummy files\n            if os.path.isfile(valid_filename):\n                os.remove(valid_filename)\n            if os.path.isfile(invalid_filename):\n                os.remove(invalid_filename)\n\n        # Step 5: Cleanup - delete project\n        del_resp = session.delete(\n            f\"{BASE_URL}/api/projects/{project_id}\",\n            timeout=TIMEOUT\n        )\n        assert del_resp.status_code == 200 or del_resp.status_code == 204, f\"Failed to delete project: {del_resp.text}\"\n\n    finally:\n        # Optional: logout endpoint if exists\n        session.post(f\"{BASE_URL}/api/auth/logout\", timeout=TIMEOUT)\n        session.close()\n\ntest_file_upload_drag_and_drop_validation()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 132, in <module>\n  File \"<string>\", line 22, in test_file_upload_drag_and_drop_validation\nAssertionError: Signup failed: {\"error\":\"User with this email already exists\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.633Z",
    "modified": "2025-11-01T09:24:29.230Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "f3bb8342-eb4d-435b-a8b0-62a23a9fc5ff",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC009-dashboard project list and statistics",
    "description": "Test the dashboard API endpoints to retrieve user project lists, project statistics, and user credits, ensuring accurate and timely data display.",
    "code": "import requests\nimport uuid\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_dashboard_project_list_and_statistics():\n    # 1. Signup a new user\n    signup_url = f\"{BASE_URL}/api/auth/signup\"\n    username = f\"testuser_{uuid.uuid4().hex[:8]}\"\n    password = \"TestPassword123!\"\n    email = f\"{username}@example.com\"\n    signup_payload = {\n        \"username\": username,\n        \"password\": password,\n        \"email\": email,\n        \"name\": username\n    }\n    signup_headers = {\n        \"Content-Type\": \"application/json\"\n    }\n    signup_resp = requests.post(signup_url, json=signup_payload, headers=signup_headers, timeout=TIMEOUT)\n    assert signup_resp.status_code == 201 or signup_resp.status_code == 200, f\"Signup failed: {signup_resp.text}\"\n\n    # 2. Login to receive JWT token\n    login_url = f\"{BASE_URL}/api/auth/login\"\n    login_payload = {\n        \"email\": email,\n        \"password\": password\n    }\n    login_resp = requests.post(login_url, json=login_payload, headers=signup_headers, timeout=TIMEOUT)\n    assert login_resp.status_code == 200, f\"Login failed: {login_resp.text}\"\n    token = login_resp.json().get(\"token\") or login_resp.json().get(\"access_token\")\n    assert token, \"JWT token not found in login response\"\n\n    auth_headers = {\n        \"Authorization\": f\"Bearer {token}\"\n    }\n\n    # 3. Create a new project to have data for dashboard endpoints\n    create_project_url = f\"{BASE_URL}/api/projects\"\n    project_name = f\"TestProject_{uuid.uuid4().hex[:8]}\"\n    create_project_payload = {\n        \"name\": project_name,\n        \"description\": \"Dashboard test project\"\n    }\n    create_project_resp = requests.post(create_project_url, json=create_project_payload, headers={**auth_headers, \"Content-Type\": \"application/json\"}, timeout=TIMEOUT)\n    assert create_project_resp.status_code in (200,201), f\"Project creation failed: {create_project_resp.text}\"\n    project = create_project_resp.json()\n    project_id = project.get(\"id\") or project.get(\"projectId\")\n    assert project_id, \"Project ID not returned\"\n\n    try:\n        # 4. Retrieve user project list\n        projects_list_url = f\"{BASE_URL}/api/projects\"\n        projects_list_resp = requests.get(projects_list_url, headers=auth_headers, timeout=TIMEOUT)\n        assert projects_list_resp.status_code == 200, f\"Get projects list failed: {projects_list_resp.text}\"\n        projects = projects_list_resp.json()\n        assert isinstance(projects, list), \"Projects list response is not a list\"\n        assert any(p.get(\"id\") == project_id or p.get(\"projectId\") == project_id for p in projects), \"Created project not found in project list\"\n\n        # 5. Retrieve project statistics\n        project_stats_url = f\"{BASE_URL}/api/stats\"\n        stats_resp = requests.get(project_stats_url, headers=auth_headers, timeout=TIMEOUT)\n        assert stats_resp.status_code == 200, f\"Get project statistics failed: {stats_resp.text}\"\n        stats = stats_resp.json()\n        # Check that stats contain relevant keys like 'projects_count', 'total_files', or 'last_active'\n        assert isinstance(stats, dict), \"Statistics response is not a dict\"\n        # Accept common keys or at least some stats\n        assert any(k in stats for k in [\"projects_count\", \"total_projects\", \"total_files\", \"last_active\"]), \"Statistics keys missing or unexpected\"\n\n        # 6. Retrieve user credits\n        credits_url = f\"{BASE_URL}/api/dashboard/credits\"\n        credits_resp = requests.get(credits_url, headers=auth_headers, timeout=TIMEOUT)\n        assert credits_resp.status_code == 200, f\"Get user credits failed: {credits_resp.text}\"\n        credits_data = credits_resp.json()\n        # Check credits_data has numeric 'credits' or 'balance' or similar key\n        assert isinstance(credits_data, dict), \"Credits response is not a dict\"\n        numeric_key_found = False\n        for key in [\"credits\", \"balance\", \"user_credits\"]:\n            if key in credits_data and (isinstance(credits_data[key], int) or isinstance(credits_data[key], float)):\n                numeric_key_found = True\n                break\n        assert numeric_key_found, \"User credits numeric value not found in response\"\n\n    finally:\n        # 7. Cleanup - delete the created project\n        delete_project_url = f\"{BASE_URL}/api/projects/{project_id}\"\n        delete_resp = requests.delete(delete_project_url, headers=auth_headers, timeout=TIMEOUT)\n        assert delete_resp.status_code in (200, 204), f\"Project deletion failed: {delete_resp.text}\"\n\ntest_dashboard_project_list_and_statistics()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 92, in <module>\n  File \"<string>\", line 48, in test_dashboard_project_list_and_statistics\nAssertionError: Project creation failed: {\"error\":\"User ID and project name are required\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.639Z",
    "modified": "2025-11-01T09:25:04.651Z"
  },
  {
    "projectId": "81fbfd96-2845-4a95-bf4f-457a5b6f8c4c",
    "testId": "26d5ad8c-496b-4066-9dd6-1dac1d12bcaa",
    "userId": "3458f4e8-9031-707c-37ea-1da20697f52a",
    "title": "TC010-admin panel user and system management",
    "description": "Verify the admin panel API endpoints for user management, system statistics retrieval, and administrative authentication.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:9002\"\nTIMEOUT = 30\n\ndef test_admin_panel_user_and_system_management():\n    # 1. Admin signup\n    signup_url = f\"{BASE_URL}/api/auth/signup\"\n    admin_signup_payload = {\n        \"username\": \"admin_test_user\",\n        \"email\": \"admin_test_user@example.com\",\n        \"password\": \"StrongPassword123!\",\n        \"name\": \"admin_test_user\"\n    }\n    signup_resp = requests.post(signup_url, json=admin_signup_payload, timeout=TIMEOUT)\n    assert signup_resp.status_code == 201, f\"Signup failed: {signup_resp.text}\"\n    signup_data = signup_resp.json()\n    assert signup_data.get(\"success\") is True, \"Signup response missing success = True\"\n    assert \"user\" in signup_data, \"Signup response missing user info\"\n\n    # 2. Admin login to get JWT token\n    login_url = f\"{BASE_URL}/api/admin/auth/route\"  # Assuming admin login is here as per PRD mentioning admin auth route\n    login_payload = {\n        \"username\": admin_signup_payload[\"username\"],\n        \"password\": admin_signup_payload[\"password\"]\n    }\n    login_resp = requests.post(login_url, json=login_payload, timeout=TIMEOUT)\n    assert login_resp.status_code == 200, f\"Admin login failed: {login_resp.text}\"\n    login_data = login_resp.json()\n    assert \"token\" in login_data, \"No token received after admin login\"\n    token = login_data[\"token\"]\n\n    headers = {\n        \"Authorization\": f\"Bearer {token}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    try:\n        # 3. Verify user management: list users (admin panel)\n        users_list_url = f\"{BASE_URL}/api/admin/users\"\n        users_resp = requests.get(users_list_url, headers=headers, timeout=TIMEOUT)\n        assert users_resp.status_code == 200, f\"Failed to get users list: {users_resp.text}\"\n        users_data = users_resp.json()\n        assert isinstance(users_data, list), \"Users list response is not a list\"\n\n        # 4. System statistics retrieval\n        stats_url = f\"{BASE_URL}/api/admin/system/stats\"\n        stats_resp = requests.get(stats_url, headers=headers, timeout=TIMEOUT)\n        assert stats_resp.status_code == 200, f\"Failed to get system stats: {stats_resp.text}\"\n        stats_data = stats_resp.json()\n        # Expecting some stats keys, check a few possible keys\n        assert any(key in stats_data for key in [\"uptime\", \"activeUsers\", \"cpuUsage\", \"memoryUsage\"]), \\\n            \"System stats missing expected keys\"\n\n        # 5. Admin logout\n        logout_url = f\"{BASE_URL}/api/auth/logout\"\n        logout_resp = requests.post(logout_url, headers=headers, timeout=TIMEOUT)\n        assert logout_resp.status_code in (200, 204), f\"Admin logout failed: {logout_resp.text}\"\n\n    finally:\n        # Cleanup: Delete the admin user created if an admin user delete endpoint exists\n        # Attempt delete user from admin users API if possible\n        # Assuming DELETE at /api/admin/users/{user_id}\n        if \"user\" in signup_data and \"id\" in signup_data[\"user\"]:\n            user_id = signup_data[\"user\"][\"id\"]\n        elif \"id\" in signup_data:\n            user_id = signup_data[\"id\"]\n        else:\n            user_id = None\n\n        if user_id:\n            try:\n                del_url = f\"{BASE_URL}/api/admin/users/{user_id}\"\n                del_resp = requests.delete(del_url, headers=headers, timeout=TIMEOUT)\n                # 200 or 204 are acceptable success codes for delete\n                assert del_resp.status_code in (200, 204), f\"Failed to delete admin user: {del_resp.text}\"\n            except Exception:\n                # If deletion fails, just pass to avoid masking test results\n                pass\n\ntest_admin_panel_user_and_system_management()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 81, in <module>\n  File \"<string>\", line 16, in test_admin_panel_user_and_system_management\nAssertionError: Signup failed: {\"error\":\"User with this email already exists\"}\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-11-01T09:22:55.645Z",
    "modified": "2025-11-01T09:24:56.188Z"
  }
]
